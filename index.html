<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rockmud – AI for Construction</title>
    <meta name="description" content="AI built for construction. Plan, estimate, and run jobs on solid ground.">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>
<body class="has-app">
    <header class="header">
        <div class="header-inner">
            <a href="/" class="logo">Rockmud</a>
            <nav class="nav">
                <a href="/about.html">About</a>
                <a href="/documentation.html">Documentation</a>
                <button type="button" class="btn-text" id="btn-estimate">Quick estimate</button>
                <button type="button" class="btn-text" id="btn-proposal">Proposal</button>
                <button type="button" class="btn-text" id="btn-schedule">Schedule</button>
                <a href="mailto:hi@masonearl.com?subject=Message%20from%20rockmud.com&body=This%20message%20was%20sent%20via%20rockmud.com%0A%0A">Contact</a>
            </nav>
        </div>
    </header>

    <div class="app-layout">
        <aside class="projects-sidebar" id="projects-sidebar">
            <div class="projects-header">
                <h3>Projects</h3>
                <button type="button" class="btn-new-project" id="btn-new-project" title="New project">+ New</button>
            </div>
            <ul class="projects-list" id="projects-list"></ul>
        </aside>

        <main class="chat-main">
            <div class="chat-panel">
                <div class="chat-quick-actions" id="chat-quick-actions">
                    <span class="quick-label">Try:</span>
                    <button type="button" class="quick-btn" data-prompt="Estimate 1500 LF of 8 inch sewer in clay, Salt Lake Metro">Quick bid</button>
                    <button type="button" class="quick-btn" data-prompt="Draft a proposal for 2000 LF of 12 inch waterline in gravel">Proposal</button>
                    <button type="button" class="quick-btn" data-prompt="How long for 1000 LF of 10 inch storm drain with a 5-person crew?">Schedule</button>
                </div>
                <div class="chat-messages" id="chat-messages"></div>
                <form class="chat-input-form" id="chat-form" action="#" method="post">
                    <textarea class="chat-input" id="chat-input" rows="1" placeholder="Ask about estimates or construction…" required></textarea>
                    <button type="submit" class="chat-send" id="chat-send" aria-label="Send">Send</button>
                </form>
            </div>
        </main>
    </div>

    <!-- New project modal -->
    <div class="modal-overlay" id="modal-new-project" hidden>
        <div class="modal">
            <h3>New project</h3>
            <form id="form-new-project">
                <input type="text" id="input-project-name" placeholder="Project name" required autocomplete="off">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="btn-cancel-project">Cancel</button>
                    <button type="submit" class="btn-primary">Create</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quick estimate modal -->
    <div class="modal-overlay" id="modal-estimate" hidden>
        <div class="modal modal-wide">
            <h3>Quick estimate</h3>
            <form id="form-estimate">
                <div class="form-row">
                    <label>Project type</label>
                    <select id="est-project-type" required>
                        <option value="waterline">Waterline</option>
                        <option value="sewer">Sewer</option>
                        <option value="storm_drain">Storm drain</option>
                        <option value="gas">Gas</option>
                        <option value="electrical">Electrical</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Linear feet</label>
                    <input type="number" id="est-linear-feet" value="1500" min="1" required>
                </div>
                <div class="form-row">
                    <label>Pipe diameter (in)</label>
                    <input type="number" id="est-pipe-diameter" value="8" min="1" required>
                </div>
                <div class="form-row">
                    <label>Trench depth (ft)</label>
                    <input type="number" id="est-trench-depth" value="4.5" min="0" step="0.1" required>
                </div>
                <div class="form-row">
                    <label>Soil type</label>
                    <select id="est-soil-type">
                        <option value="sand">Sand</option>
                        <option value="clay" selected>Clay</option>
                        <option value="gravel">Gravel</option>
                        <option value="rock">Rock</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Location</label>
                    <select id="est-location">
                        <option value="salt_lake_metro" selected>Salt Lake Metro</option>
                        <option value="utah_county">Utah County</option>
                        <option value="davis_weber">Davis/Weber</option>
                        <option value="rural_utah">Rural Utah</option>
                        <option value="mountain_areas">Mountain areas</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Crew size</label>
                    <input type="number" id="est-crew-size" value="5" min="1" max="20">
                </div>
                <div class="form-row">
                    <label>Season</label>
                    <select id="est-season">
                        <option value="winter">Winter</option>
                        <option value="spring">Spring</option>
                        <option value="summer" selected>Summer</option>
                        <option value="fall">Fall</option>
                    </select>
                </div>
                <div class="form-row">
                    <label>Pipe material</label>
                    <select id="est-pipe-material">
                        <option value="PVC C900" selected>PVC C900</option>
                        <option value="HDPE">HDPE</option>
                        <option value="DIP">DIP</option>
                        <option value="PVC SDR 35">PVC SDR 35</option>
                        <option value="RCP">RCP</option>
                        <option value="PE">PE</option>
                        <option value="Steel">Steel</option>
                        <option value="PVC Conduit">PVC Conduit</option>
                    </select>
                </div>
                <div class="form-row form-row-inline">
                    <label><input type="checkbox" id="est-dewatering"> Dewatering</label>
                </div>
                <div class="form-row form-row-inline">
                    <label><input type="checkbox" id="est-rock"> Rock excavation</label>
                </div>
                <div class="form-row">
                    <label>Fittings</label>
                    <input type="number" id="est-fittings" value="0" min="0">
                </div>
                <div class="form-row">
                    <label>Road crossings</label>
                    <input type="number" id="est-road-crossings" value="0" min="0">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="btn-close-estimate">Cancel</button>
                    <button type="submit" class="btn-primary" id="btn-run-estimate">Run estimate</button>
                </div>
            </form>
            <div id="estimate-result" class="estimate-result" hidden></div>
            <div id="estimate-feedback" class="estimate-feedback" hidden>
                <h4>Submit actual cost (optional)</h4>
                <form id="form-feedback">
                    <input type="number" id="input-actual-cost" placeholder="Actual cost ($)" min="0" step="1000">
                    <button type="submit" class="btn-primary">Submit feedback</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Proposal generator modal -->
    <div class="modal-overlay" id="modal-proposal" hidden>
        <div class="modal modal-wide">
            <h3>Generate proposal</h3>
            <form id="form-proposal">
                <div class="form-row">
                    <label>Client / project name</label>
                    <input type="text" id="prop-client" placeholder="e.g. City of Salt Lake - Main St" required>
                </div>
                <div class="form-row">
                    <label>Scope summary</label>
                    <textarea id="prop-scope" rows="3" placeholder="e.g. 1,500 LF of 8&quot; sewer, clay soil, 4.5 ft depth"></textarea>
                </div>
                <div class="form-row">
                    <label>Total bid ($)</label>
                    <input type="number" id="prop-total" placeholder="From estimate or enter manually" min="0" step="1000">
                </div>
                <div class="form-row">
                    <label>Duration (days)</label>
                    <input type="number" id="prop-duration" placeholder="From estimate" min="1">
                </div>
                <div class="form-row">
                    <label>Assumptions</label>
                    <textarea id="prop-assumptions" rows="2" placeholder="e.g. Existing utilities to be located by others"></textarea>
                </div>
                <div class="form-row">
                    <label>Exclusions</label>
                    <textarea id="prop-exclusions" rows="2" placeholder="e.g. Traffic control by owner"></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="btn-close-proposal">Cancel</button>
                    <button type="submit" class="btn-primary">Generate & download PDF</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Schedule builder modal -->
    <div class="modal-overlay" id="modal-schedule" hidden>
        <div class="modal modal-wide">
            <h3>Build schedule</h3>
            <form id="form-schedule">
                <div class="form-row">
                    <label>Project name</label>
                    <input type="text" id="sched-project" placeholder="Project name">
                </div>
                <div class="form-row">
                    <label>Start date</label>
                    <input type="date" id="sched-start">
                </div>
                <div class="form-row">
                    <label>Duration (days)</label>
                    <input type="number" id="sched-duration" value="14" min="1" required>
                </div>
                <div class="form-row">
                    <label>Phases (comma-separated)</label>
                    <input type="text" id="sched-phases" value="Mobilization, Trenching, Pipe install, Backfill, Restoration" placeholder="Mobilization, Trenching, Pipe, Backfill, Restoration">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="btn-close-schedule">Cancel</button>
                    <button type="submit" class="btn-primary">Generate & download PDF</button>
                </div>
            </form>
            <div id="schedule-preview" class="schedule-preview" hidden></div>
        </div>
    </div>

    <footer class="footer footer-mini">
        <p>&copy; <span id="year"></span> Rockmud</p>
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();
    </script>
    <script src="js/app.js"></script>
</body>
</html>
